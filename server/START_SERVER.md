# üöÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∑–∞–ø—É—Å–∫—É

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –æ–∫—Ä—É–∂–µ–Ω–∏—è**
   –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
   ```env
   PORT=8080
   HOST=127.0.0.1
   PGSQL_HOST=localhost
   PGSQL_PORT=5432
   PGSQL_USER=postgres
   PGSQL_PASSWD=password
   PGSQL_DB=locationx_db
   JWT_SECRET=your_super_secret_jwt_key_change_this_in_production
   DATABASE_URL=postgresql://postgres:password@localhost:5432/locationx_db
   ```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
   ```bash
   cargo build
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä**
   ```bash
   cargo run
   ```

   –°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://127.0.0.1:8080

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞:
```bash
curl http://localhost:8080/v1/status/server
```

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥–æ—Å—Ç–µ–≤–æ–π endpoint:
```bash
curl http://localhost:8080/v1/guest
```

### –¢–µ—Å—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:
```bash
curl -X POST http://localhost:8080/v1/login \
  -H "Content-Type: application/json" \
  -d '{"email": "test@example.com", "password": "password123"}'
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API

### –ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- `PUT /v1/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /v1/login` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (—Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ: test@example.com / password123)
- `POST /v1/token` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ access —Ç–æ–∫–µ–Ω–∞
- `GET /v1/guest` - –æ—Ç–∫—Ä—ã—Ç—ã–π endpoint
- `GET /v1/user` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- `PATCH /v1/user` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –°—Ç–∞—Ä—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å):
- `GET /v1/status/server` - —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞
- `GET /v1/status/db` - —Å—Ç–∞—Ç—É—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `POST /v1/users` - —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç)
- `GET /v1/users` - —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `GET /v1/users/{id}` - –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
- `DELETE /v1/users/{id}` - —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ú–∏–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã):
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ SQLx CLI
cargo install sqlx-cli --no-default-features --features rustls,postgres

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
sqlx migrate run
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü:
- `user_types` - —Ç–∏–ø—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (default, admin, moderator)  
- `users` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å UUID, –ø–∞—Ä–æ–ª–µ–º –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- üîß –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å mock-–¥–∞–Ω–Ω—ã–º–∏
- üîê JWT —Ç–æ–∫–µ–Ω—ã: access (15 –º–∏–Ω), refresh (30 –¥–Ω–µ–π)  
- üîë –¢–µ—Å—Ç–æ–≤—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: test@example.com / password123
- üìÑ –ü–æ–¥—Ä–æ–±–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API —Å–º. –≤ `API_ENDPOINTS.md`
